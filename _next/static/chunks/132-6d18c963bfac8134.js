"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[132],{671:(e,t,r)=>{r.d(t,{K:()=>o});var s=r(3857),a=r(3081),n=r.n(a),l=r(7920),o=function(){var e;return(0,l.EH)((e=(0,s.A)(n().mark(function e(t){var r,s,a,l,o,i,c,d,u,m,p;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o="https://api.open-meteo.com/v1/forecast?latitude=".concat(t.lat,"&longitude=").concat(t.lon,"&current_weather=true&hourly=relative_humidity_2m,surface_pressure,weathercode&timezone=auto"),e.next=3,fetch(o);case 3:if((i=e.sent).ok){e.next=6;break}throw Error("Ошибка запроса погоды");case 6:return e.next=8,i.json();case 8:var n;return d=(c=e.sent).current_weather,u=null!=(r=null==(s=c.hourly)||null==(s=s.relative_humidity_2m)?void 0:s[0])?r:null,m=null!=(a=null==(l=c.hourly)||null==(l=l.surface_pressure)?void 0:l[0])?a:null,p=0===(n=d.weathercode)?"Ясно":[1,2,3].includes(n)?"Облачно":[45,48].includes(n)?"Туман":[51,53,55,56,57].includes(n)?"Морось":[61,63,65,66,67,80,81,82].includes(n)?"Дождь":[71,73,75,77,85,86].includes(n)?"Снег":[95,96,99].includes(n)?"Гроза":"Неизвестно",e.abrupt("return",{temperature:d.temperature,wind:d.windspeed,humidity:u,pressure:m,description:p});case 15:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),{sid:"-683k2x"})}},4421:(e,t,r)=>{r.d(t,{E:()=>n}),r(4232);var s=r(9573),a=r(7876),n=function(e){var t=e.className,r=e.style;return(0,a.jsx)("div",{className:(0,s.QP)("skeleton-base w-full min-h-10",void 0===t?"":t),style:r,children:(0,a.jsx)("div",{className:"skeleton-shimmer"})})}},9132:(e,t,r)=>{r.d(t,{eJ:()=>v});var s=r(6284),a=r(3857),n=r(3081),l=r.n(n),o=r(7920),i=r(671),c=r(9724);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,s.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m=(0,o.y$)([{id:"moscow",name:"Москва",image:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80"},{id:"saint-petersburg",name:"Санкт-Петербург",image:"https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=800&q=80"},{id:"kazan",name:"Казань",image:"https://images.unsplash.com/photo-1501594907352-04cda38ebc29?auto=format&fit=crop&w=800&q=80"},{id:"sochi",name:"Сочи",image:"https://images.unsplash.com/photo-1502082553048-f009c37129b9?auto=format&fit=crop&w=800&q=80"},{id:"yekaterinburg",name:"Екатеринбург",image:"https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=800&q=80"}],{name:"$cities",sid:"bhnzc"}),p=[{name:"moscow",coords:{lat:55.75,lon:37.62}},{name:"saint-petersburg",coords:{lat:59.93,lon:30.31}},{name:"kazan",coords:{lat:55.79,lon:49.12}},{name:"sochi",coords:{lat:43.6,lon:39.73}},{name:"yekaterinburg",coords:{lat:56.84,lon:60.61}}],h=(0,o.EH)((0,a.A)(l().mark(function e(){return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(p.map(function(e){var t=e.coords;return(0,i.K)()(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),{name:"weathersFx",sid:"-xjpwm4"});(0,o.XM)({and:[{clock:c.D8,target:h}],or:{sid:"efgc6i"}}),(0,o.XM)({and:[{clock:h.doneData,source:m,fn:function(e,t){return e.map(function(e,r){return u(u({},e),{},{temperature:t[r].temperature})})},target:m}],or:{sid:"ei7b5b"}}),h.pending;var x=r(9664);r(4232);var f=r(8230),b=r.n(f),g=r(4421),w=r(7876),j=function(e){var t=e.city;return(0,w.jsx)(b(),{href:"/details/".concat(t.id),className:"block",children:(0,w.jsx)("div",{className:"relative w-80 h-52 rounded-3xl overflow-hidden shadow-xl m-4 cursor-pointer transition-transform duration-200 hover:scale-105 hover:rotate-1",style:{backgroundImage:"url(".concat(t.image,")"),backgroundSize:"cover",backgroundPosition:"center"},children:(0,w.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-tr from-black/60 to-white/10 flex flex-col justify-end p-6",children:[(0,w.jsx)("h2",{className:"text-white text-2xl font-bold mb-2 drop-shadow-lg",children:t.name}),t.temperature?(0,w.jsxs)("div",{className:"text-yellow-300 text-xl font-semibold drop-shadow",children:[t.temperature,"\xb0C"]}):(0,w.jsx)(g.E,{className:"w-30"})]})})})},v=function(){return(0,w.jsx)("div",{className:"flex flex-wrap justify-center gap-6 mt-4",children:(0,x.UH)(m,{fn:function(e){return(0,w.jsx)(j,{city:e})},getKey:function(e){return e.id}})})}},9724:(e,t,r)=>{r.d(t,{H9:()=>E,d7:()=>_,D8:()=>o});var s=r(4232),a=r(7920),n=r(671),l={lat:55.75,lon:37.62},o=(0,a.lh)({name:"pageOpened",sid:"-hm7b0k"}),i=(0,n.K)();(0,a.XM)({and:[{clock:o,fn:function(){return l},target:i}],or:{sid:"qtp3rv"}});var c=(0,a.y$)(null,{name:"$currentWeather",sid:"wmhnt8"});(0,a.XM)({and:[{clock:i.doneData,target:c}],or:{sid:"r9n4zc"}});var d=i.pending,u=r(6284),m=r(9860),p={moscow:{coords:{lat:55.75,lon:37.62},displayName:"Москва",image:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80"},"saint-petersburg":{coords:{lat:59.93,lon:30.31},displayName:"Санкт-Петербург",image:"https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=800&q=80"},kazan:{coords:{lat:55.79,lon:49.12},displayName:"Казань",image:"https://images.unsplash.com/photo-1501594907352-04cda38ebc29?auto=format&fit=crop&w=800&q=80"},sochi:{coords:{lat:43.6,lon:39.73},displayName:"Сочи",image:"https://images.unsplash.com/photo-1502082553048-f009c37129b9?auto=format&fit=crop&w=800&q=80"},yekaterinburg:{coords:{lat:56.84,lon:60.61},displayName:"Екатеринбург",image:"https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=800&q=80"}},h=["displayName"];function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach(function(t){(0,u.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var b=(0,a.lh)({name:"getWeatherByCity",sid:"2vpy6y"}),g=(0,a.y$)(null,{name:"$cityInfo",sid:"z2zcqc"});(0,a.XM)({and:[{clock:b,filter:function(e){return!!p[e]},fn:function(e){var t=p[e],r=t.displayName;return f(f({},(0,m.A)(t,h)),{},{name:r})},target:g}],or:{sid:"-ckt3jo"}});var w=(0,n.K)(),j=(0,a.y$)(null,{name:"$forecastWeather",sid:"goeref"});(0,a.XM)({and:[{clock:g,filter:Boolean,fn:function(e){return e.coords},target:w}],or:{sid:"-bod8jd"}}),(0,a.XM)({and:[{clock:w.doneData,target:j}],or:{sid:"-bkiodu"}});var v=(0,a.kg)({and:[g,j,function(e,t){return e||t?f(f({},null!=e?e:{}),null!=t?t:{}):null}],or:{name:"$weatherByCity",sid:"d9u4pj"}}),y=w.pending,N=r(9664),k=r(4421),O=r(7876),E=function(){var e=(0,N.e3)({weather:c,gateOpened:o,pending:d}),t=e.gateOpened,r=e.weather;return e.pending,(0,s.useEffect)(t,[]),(0,O.jsx)("div",{className:"w-full flex justify-center pt-16 pb-8",children:(0,O.jsxs)("div",{className:"bg-white/80 rounded-2xl shadow-lg px-16 py-10 flex flex-col items-center gap-2",children:[r?(0,O.jsxs)("span",{className:"text-5xl font-extrabold text-purple-700 drop-shadow",children:["+",r.temperature,"\xb0C"]}):(0,O.jsx)(k.E,{}),(0,O.jsx)("span",{className:"text-lg text-gray-700 font-medium opacity-80",children:"Текущая температура"})]})})},D=r(3576),P=r(8230),C=r.n(P),z=r(4587),q=r.n(z),_=function(e){var t,r=e.id,a=(0,N.e3)([v,b,y]),n=(0,D.A)(a,3),l=n[0],o=n[1],i=n[2];return((0,s.useEffect)(function(){console.log({id:r}),o(r)},[r]),console.log({weather:l,pending:i}),i)?(0,O.jsxs)("div",{className:"relative w-full min-h-screen flex items-center justify-center",children:[(0,O.jsx)(C(),{href:"/main",className:"absolute top-8 left-8 z-20 group",children:(0,O.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-full bg-white/70 hover:bg-white/90 shadow-lg backdrop-blur-md transition-all duration-200",children:[(0,O.jsx)("svg",{className:"w-4 h-4 text-purple-700 group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,O.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),(0,O.jsx)("span",{className:"text-base text-gray-700 font-semibold hidden sm:block group-hover:text-purple-700 transition-colors",children:"Назад"})]})}),(0,O.jsxs)("div",{className:"relative z-10 max-w-2xl w-full mx-4 rounded-3xl bg-white/20 backdrop-blur-lg shadow-2xl p-10 flex flex-col items-center",children:[(0,O.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,O.jsx)(k.E,{className:"w-16 h-16 rounded-full"}),(0,O.jsx)(k.E,{className:"w-32 h-16"})]}),(0,O.jsx)(k.E,{className:"w-48 h-8 mb-2"}),(0,O.jsx)(k.E,{className:"w-64 h-6 mb-8"}),(0,O.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 w-full mt-2",children:[(0,O.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,O.jsx)(k.E,{className:"w-12 h-12 rounded-full mb-1"}),(0,O.jsx)(k.E,{className:"w-16 h-6 mb-1"}),(0,O.jsx)(k.E,{className:"w-12 h-4"})]}),(0,O.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,O.jsx)(k.E,{className:"w-12 h-12 rounded-full mb-1"}),(0,O.jsx)(k.E,{className:"w-16 h-6 mb-1"}),(0,O.jsx)(k.E,{className:"w-12 h-4"})]}),(0,O.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,O.jsx)(k.E,{className:"w-12 h-12 rounded-full mb-1"}),(0,O.jsx)(k.E,{className:"w-16 h-6 mb-1"}),(0,O.jsx)(k.E,{className:"w-12 h-4"})]})]})]})]}):l?(0,O.jsxs)("div",{className:"relative w-full min-h-screen flex items-center justify-center",children:[(0,O.jsx)(C(),{href:"/main",className:"absolute top-8 left-8 z-20 group",children:(0,O.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-full bg-white/70 hover:bg-white/90 shadow-lg backdrop-blur-md transition-all duration-200",children:[(0,O.jsx)("svg",{className:"w-4 h-4 text-purple-700 group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,O.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),(0,O.jsx)("span",{className:"text-base text-gray-700 font-semibold hidden sm:block group-hover:text-purple-700 transition-colors",children:"Назад"})]})}),(0,O.jsx)("div",{className:"absolute inset-0 z-0",children:(0,O.jsx)(q(),{src:l.image,alt:l.name,fill:!0,style:{objectFit:"cover",filter:"blur(4px) brightness(0.7)"},priority:!0,sizes:"100vw"})}),(0,O.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-black/60 via-transparent to-black/40 z-0"}),(0,O.jsxs)("div",{className:"relative z-10 max-w-2xl w-full mx-4 rounded-3xl bg-white/20 backdrop-blur-lg shadow-2xl p-10 flex flex-col items-center fade-in",children:[(0,O.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,O.jsx)("span",{className:"text-6xl drop-shadow-lg pop-in delay-100",children:l.description?(t=l.description).toLowerCase().includes("ясно")?"☀️":t.toLowerCase().includes("дожд")?"\uD83C\uDF27️":t.toLowerCase().includes("обла")?"⛅":t.toLowerCase().includes("пасмурно")?"☁️":t.toLowerCase().includes("снег")?"❄️":"\uD83C\uDF21️":null}),(0,O.jsxs)("span",{className:"text-6xl font-extrabold text-white drop-shadow-lg pop-in delay-200",children:[l.temperature,"\xb0C"]})]}),(0,O.jsx)("h1",{className:"text-3xl font-bold text-white mb-2 drop-shadow-lg text-center fade-in delay-300",children:l.name}),(0,O.jsx)("div",{className:"text-xl text-white/90 mb-8 text-center fade-in delay-300",children:l.description}),(0,O.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 w-full mt-2",children:[(0,O.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,O.jsx)("span",{className:"text-3xl mb-1",children:"\uD83D\uDCA8"}),(0,O.jsxs)("span",{className:"text-lg text-gray-800 font-semibold",children:[l.wind," м/с"]}),(0,O.jsx)("span",{className:"text-xs text-gray-600",children:"Ветер"})]}),(0,O.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,O.jsx)("span",{className:"text-3xl mb-1",children:"\uD83D\uDCA7"}),(0,O.jsxs)("span",{className:"text-lg text-gray-800 font-semibold",children:[l.humidity,"%"]}),(0,O.jsx)("span",{className:"text-xs text-gray-600",children:"Влажность"})]}),(0,O.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,O.jsx)("span",{className:"text-3xl mb-1",children:"\uD83C\uDF21️"}),(0,O.jsxs)("span",{className:"text-lg text-gray-800 font-semibold",children:[l.pressure," мм"]}),(0,O.jsx)("span",{className:"text-xs text-gray-600",children:"Давление"})]})]})]})]}):null}}}]);