(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[248],{671:(e,t,s)=>{"use strict";s.d(t,{K:()=>i});var r=s(3857),a=s(3081),n=s.n(a),l=s(7920),i=function(){var e;return(0,l.EH)((e=(0,r.A)(n().mark(function e(t){var s,r,a,l,i,o,c,d,u,p,m;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i="https://api.open-meteo.com/v1/forecast?latitude=".concat(t.lat,"&longitude=").concat(t.lon,"&current_weather=true&hourly=relative_humidity_2m,surface_pressure,weathercode&timezone=auto"),e.next=3,fetch(i);case 3:if((o=e.sent).ok){e.next=6;break}throw Error("Ошибка запроса погоды");case 6:return e.next=8,o.json();case 8:var n;return d=(c=e.sent).current_weather,u=null!=(s=null==(r=c.hourly)||null==(r=r.relative_humidity_2m)?void 0:r[0])?s:null,p=null!=(a=null==(l=c.hourly)||null==(l=l.surface_pressure)?void 0:l[0])?a:null,m=0===(n=d.weathercode)?"Ясно":[1,2,3].includes(n)?"Облачно":[45,48].includes(n)?"Туман":[51,53,55,56,57].includes(n)?"Морось":[61,63,65,66,67,80,81,82].includes(n)?"Дождь":[71,73,75,77,85,86].includes(n)?"Снег":[95,96,99].includes(n)?"Гроза":"Неизвестно",e.abrupt("return",{temperature:d.temperature,wind:d.windspeed,humidity:u,pressure:p,description:m});case 15:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),{sid:"-683k2x"})}},2380:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/details/[id]",function(){return s(5780)}])},4421:(e,t,s)=>{"use strict";s.d(t,{E:()=>n}),s(4232);var r=s(9573),a=s(7876),n=function(e){var t=e.className,s=e.style;return(0,a.jsx)("div",{className:(0,r.QP)("skeleton-base w-full min-h-10",void 0===t?"":t),style:s,children:(0,a.jsx)("div",{className:"skeleton-shimmer"})})}},5780:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h,getSSGPaths:()=>p,getSSGProps:()=>d,getSSRProps:()=>o});var r=s(3857),a=s(3081),n=s.n(a),l=s(9724),i=s(7876);function o(e){return c.apply(this,arguments)}function c(){return(c=(0,r.A)(n().mark(function e(t){var s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.params.id,e.abrupt("return",{props:{id:s}});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function d(e){return u.apply(this,arguments)}function u(){return(u=(0,r.A)(n().mark(function e(t){var s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.params.id,e.abrupt("return",{props:{id:s}});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function p(){return m.apply(this,arguments)}function m(){return(m=(0,r.A)(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{paths:[{params:{id:"moscow"}},{params:{id:"saint-petersburg"}},{params:{id:"kazan"}},{params:{id:"sochi"}},{params:{id:"yekaterinburg"}}],fallback:!1});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function h(e){var t=e.id;return(0,i.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-100 via-purple-100 to-yellow-50 flex flex-col items-center pb-12",children:(0,i.jsx)(l.d7,{id:t})})}},9724:(e,t,s)=>{"use strict";s.d(t,{H9:()=>O,d7:()=>L,D8:()=>i});var r=s(4232),a=s(7920),n=s(671),l={lat:55.75,lon:37.62},i=(0,a.lh)({name:"pageOpened",sid:"-hm7b0k"}),o=(0,n.K)();(0,a.XM)({and:[{clock:i,fn:function(){return l},target:o}],or:{sid:"qtp3rv"}});var c=(0,a.y$)(null,{name:"$currentWeather",sid:"wmhnt8"});(0,a.XM)({and:[{clock:o.doneData,target:c}],or:{sid:"r9n4zc"}});var d=o.pending,u=s(6284),p=s(9860),m={moscow:{coords:{lat:55.75,lon:37.62},displayName:"Москва",image:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80"},"saint-petersburg":{coords:{lat:59.93,lon:30.31},displayName:"Санкт-Петербург",image:"https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=800&q=80"},kazan:{coords:{lat:55.79,lon:49.12},displayName:"Казань",image:"https://images.unsplash.com/photo-1501594907352-04cda38ebc29?auto=format&fit=crop&w=800&q=80"},sochi:{coords:{lat:43.6,lon:39.73},displayName:"Сочи",image:"https://images.unsplash.com/photo-1502082553048-f009c37129b9?auto=format&fit=crop&w=800&q=80"},yekaterinburg:{coords:{lat:56.84,lon:60.61},displayName:"Екатеринбург",image:"https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=800&q=80"}},h=["displayName"];function x(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,r)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?x(Object(s),!0).forEach(function(t){(0,u.A)(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):x(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}var b=(0,a.lh)({name:"getWeatherByCity",sid:"2vpy6y"}),w=(0,a.y$)(null,{name:"$cityInfo",sid:"z2zcqc"});(0,a.XM)({and:[{clock:b,filter:function(e){return!!m[e]},fn:function(e){var t=m[e],s=t.displayName;return f(f({},(0,p.A)(t,h)),{},{name:s})},target:w}],or:{sid:"-ckt3jo"}});var g=(0,n.K)(),j=(0,a.y$)(null,{name:"$forecastWeather",sid:"goeref"});(0,a.XM)({and:[{clock:w,filter:Boolean,fn:function(e){return e.coords},target:g}],or:{sid:"-bod8jd"}}),(0,a.XM)({and:[{clock:g.doneData,target:j}],or:{sid:"-bkiodu"}});var v=(0,a.kg)({and:[w,j,function(e,t){return e||t?f(f({},null!=e?e:{}),null!=t?t:{}):null}],or:{name:"$weatherByCity",sid:"d9u4pj"}}),N=g.pending,y=s(9664),k=s(4421),E=s(7876),O=function(){var e=(0,y.e3)({weather:c,gateOpened:i,pending:d}),t=e.gateOpened,s=e.weather;return e.pending,(0,r.useEffect)(t,[]),(0,E.jsx)("div",{className:"w-full flex justify-center pt-16 pb-8",children:(0,E.jsxs)("div",{className:"bg-white/80 rounded-2xl shadow-lg px-16 py-10 flex flex-col items-center gap-2",children:[s?(0,E.jsxs)("span",{className:"text-5xl font-extrabold text-purple-700 drop-shadow",children:["+",s.temperature,"\xb0C"]}):(0,E.jsx)(k.E,{}),(0,E.jsx)("span",{className:"text-lg text-gray-700 font-medium opacity-80",children:"Текущая температура"})]})})},_=s(3576),C=s(8230),D=s.n(C),P=s(4587),z=s.n(P),L=function(e){var t,s=e.id,a=(0,y.e3)([v,b,N]),n=(0,_.A)(a,3),l=n[0],i=n[1],o=n[2];return((0,r.useEffect)(function(){console.log({id:s}),i(s)},[s]),console.log({weather:l,pending:o}),o)?(0,E.jsxs)("div",{className:"relative w-full min-h-screen flex items-center justify-center",children:[(0,E.jsx)(D(),{href:"/main",className:"absolute top-8 left-8 z-20 group",children:(0,E.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-full bg-white/70 hover:bg-white/90 shadow-lg backdrop-blur-md transition-all duration-200",children:[(0,E.jsx)("svg",{className:"w-4 h-4 text-purple-700 group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),(0,E.jsx)("span",{className:"text-base text-gray-700 font-semibold hidden sm:block group-hover:text-purple-700 transition-colors",children:"Назад"})]})}),(0,E.jsxs)("div",{className:"relative z-10 max-w-2xl w-full mx-4 rounded-3xl bg-white/20 backdrop-blur-lg shadow-2xl p-10 flex flex-col items-center",children:[(0,E.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,E.jsx)(k.E,{className:"w-16 h-16 rounded-full"}),(0,E.jsx)(k.E,{className:"w-32 h-16"})]}),(0,E.jsx)(k.E,{className:"w-48 h-8 mb-2"}),(0,E.jsx)(k.E,{className:"w-64 h-6 mb-8"}),(0,E.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 w-full mt-2",children:[(0,E.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,E.jsx)(k.E,{className:"w-12 h-12 rounded-full mb-1"}),(0,E.jsx)(k.E,{className:"w-16 h-6 mb-1"}),(0,E.jsx)(k.E,{className:"w-12 h-4"})]}),(0,E.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,E.jsx)(k.E,{className:"w-12 h-12 rounded-full mb-1"}),(0,E.jsx)(k.E,{className:"w-16 h-6 mb-1"}),(0,E.jsx)(k.E,{className:"w-12 h-4"})]}),(0,E.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,E.jsx)(k.E,{className:"w-12 h-12 rounded-full mb-1"}),(0,E.jsx)(k.E,{className:"w-16 h-6 mb-1"}),(0,E.jsx)(k.E,{className:"w-12 h-4"})]})]})]})]}):l?(0,E.jsxs)("div",{className:"relative w-full min-h-screen flex items-center justify-center",children:[(0,E.jsx)(D(),{href:"/main",className:"absolute top-8 left-8 z-20 group",children:(0,E.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-full bg-white/70 hover:bg-white/90 shadow-lg backdrop-blur-md transition-all duration-200",children:[(0,E.jsx)("svg",{className:"w-4 h-4 text-purple-700 group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,E.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),(0,E.jsx)("span",{className:"text-base text-gray-700 font-semibold hidden sm:block group-hover:text-purple-700 transition-colors",children:"Назад"})]})}),(0,E.jsx)("div",{className:"absolute inset-0 z-0",children:(0,E.jsx)(z(),{src:l.image,alt:l.name,fill:!0,style:{objectFit:"cover",filter:"blur(4px) brightness(0.7)"},priority:!0,sizes:"100vw"})}),(0,E.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-black/60 via-transparent to-black/40 z-0"}),(0,E.jsxs)("div",{className:"relative z-10 max-w-2xl w-full mx-4 rounded-3xl bg-white/20 backdrop-blur-lg shadow-2xl p-10 flex flex-col items-center fade-in",children:[(0,E.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,E.jsx)("span",{className:"text-6xl drop-shadow-lg pop-in delay-100",children:l.description?(t=l.description).toLowerCase().includes("ясно")?"☀️":t.toLowerCase().includes("дожд")?"\uD83C\uDF27️":t.toLowerCase().includes("обла")?"⛅":t.toLowerCase().includes("пасмурно")?"☁️":t.toLowerCase().includes("снег")?"❄️":"\uD83C\uDF21️":null}),(0,E.jsxs)("span",{className:"text-6xl font-extrabold text-white drop-shadow-lg pop-in delay-200",children:[l.temperature,"\xb0C"]})]}),(0,E.jsx)("h1",{className:"text-3xl font-bold text-white mb-2 drop-shadow-lg text-center fade-in delay-300",children:l.name}),(0,E.jsx)("div",{className:"text-xl text-white/90 mb-8 text-center fade-in delay-300",children:l.description}),(0,E.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 w-full mt-2",children:[(0,E.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,E.jsx)("span",{className:"text-3xl mb-1",children:"\uD83D\uDCA8"}),(0,E.jsxs)("span",{className:"text-lg text-gray-800 font-semibold",children:[l.wind," м/с"]}),(0,E.jsx)("span",{className:"text-xs text-gray-600",children:"Ветер"})]}),(0,E.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,E.jsx)("span",{className:"text-3xl mb-1",children:"\uD83D\uDCA7"}),(0,E.jsxs)("span",{className:"text-lg text-gray-800 font-semibold",children:[l.humidity,"%"]}),(0,E.jsx)("span",{className:"text-xs text-gray-600",children:"Влажность"})]}),(0,E.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,E.jsx)("span",{className:"text-3xl mb-1",children:"\uD83C\uDF21️"}),(0,E.jsxs)("span",{className:"text-lg text-gray-800 font-semibold",children:[l.pressure," мм"]}),(0,E.jsx)("span",{className:"text-xs text-gray-600",children:"Давление"})]})]})]})]}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[626,636,593,792],()=>t(2380)),_N_E=e.O()}]);