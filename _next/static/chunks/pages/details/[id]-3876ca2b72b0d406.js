(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[248],{671:(e,s,t)=>{"use strict";t.d(s,{K:()=>i});var r=t(3857),a=t(3081),l=t.n(a),n=t(7920),i=function(){var e;return(0,n.EH)((e=(0,r.A)(l().mark(function e(s){var t,r,a,n,i,o,c,d,u,m,p;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i="https://api.open-meteo.com/v1/forecast?latitude=".concat(s.lat,"&longitude=").concat(s.lon,"&current_weather=true&hourly=relative_humidity_2m,surface_pressure,weathercode&timezone=auto"),e.next=3,fetch(i);case 3:if((o=e.sent).ok){e.next=6;break}throw Error("Ошибка запроса погоды");case 6:return e.next=8,o.json();case 8:var l;return d=(c=e.sent).current_weather,u=null!=(t=null==(r=c.hourly)||null==(r=r.relative_humidity_2m)?void 0:r[0])?t:null,m=null!=(a=null==(n=c.hourly)||null==(n=n.surface_pressure)?void 0:n[0])?a:null,p=0===(l=d.weathercode)?"Ясно":[1,2,3].includes(l)?"Облачно":[45,48].includes(l)?"Туман":[51,53,55,56,57].includes(l)?"Морось":[61,63,65,66,67,80,81,82].includes(l)?"Дождь":[71,73,75,77,85,86].includes(l)?"Снег":[95,96,99].includes(l)?"Гроза":"Неизвестно",e.abrupt("return",{temperature:d.temperature,wind:d.windspeed,humidity:u,pressure:m,description:p});case 15:case"end":return e.stop()}},e)})),function(s){return e.apply(this,arguments)}),{sid:"-683k2x"})}},1606:e=>{e.exports={"skeleton-base":"styles_skeleton-base__mAM8y","skeleton-shimmer":"styles_skeleton-shimmer__ybB7V",shimmer:"styles_shimmer__YaNnJ"}},2380:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/details/[id]",function(){return t(5780)}])},3e3:e=>{e.exports={"fade-in":"styles_fade-in__9ZwiJ",fadeIn:"styles_fadeIn__4PHIu","pop-in":"styles_pop-in__jBn1G",popIn:"styles_popIn__l9IMK","delay-100":"styles_delay-100__8anyx","delay-200":"styles_delay-200__PvL7P","delay-300":"styles_delay-300__S2hvv"}},4421:(e,s,t)=>{"use strict";t.d(s,{E:()=>i}),t(4232);var r=t(9573),a=t(1606),l=t.n(a),n=t(7876),i=function(e){var s=e.className,t=e.style;return(0,n.jsx)("div",{className:(0,r.QP)(l()["skeleton-base"],"w-full min-h-10",void 0===s?"":s),style:t,children:(0,n.jsx)("div",{className:l()["skeleton-shimmer"]})})}},5780:(e,s,t)=>{"use strict";t.r(s),t.d(s,{__N_SSG:()=>o,_getServerSideProps:()=>c,default:()=>d});var r=t(3857),a=t(3081),l=t.n(a),n=t(9724),i=t(7876),o=!0,c=function(){var e=(0,r.A)(l().mark(function e(s){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.params.id,e.abrupt("return",{props:{id:t}});case 2:case"end":return e.stop()}},e)}));return function(s){return e.apply(this,arguments)}}();function d(e){var s=e.id;return(0,i.jsx)("div",{className:"h-full flex flex-col items-center",children:(0,i.jsx)(n.d7,{id:s})})}},9724:(e,s,t)=>{"use strict";t.d(s,{H9:()=>E,d7:()=>A,D8:()=>i});var r=t(4232),a=t(7920),l=t(671),n={lat:55.75,lon:37.62},i=(0,a.lh)({name:"pageOpened",sid:"-hm7b0k"}),o=(0,l.K)();(0,a.XM)({and:[{clock:i,fn:function(){return n},target:o}],or:{sid:"qtp3rv"}});var c=(0,a.y$)(null,{name:"$currentWeather",sid:"wmhnt8"});(0,a.XM)({and:[{clock:o.doneData,target:c}],or:{sid:"r9n4zc"}});var d=o.pending,u=t(6284),m=t(9860),p={moscow:{coords:{lat:55.75,lon:37.62},displayName:"Москва",image:"https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=800&q=80"},"saint-petersburg":{coords:{lat:59.93,lon:30.31},displayName:"Санкт-Петербург",image:"https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=800&q=80"},kazan:{coords:{lat:55.79,lon:49.12},displayName:"Казань",image:"https://images.unsplash.com/photo-1501594907352-04cda38ebc29?auto=format&fit=crop&w=800&q=80"},sochi:{coords:{lat:43.6,lon:39.73},displayName:"Сочи",image:"https://images.unsplash.com/photo-1502082553048-f009c37129b9?auto=format&fit=crop&w=800&q=80"},yekaterinburg:{coords:{lat:56.84,lon:60.61},displayName:"Екатеринбург",image:"https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=800&q=80"}},x=["displayName"];function h(e,s){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);s&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),t.push.apply(t,r)}return t}function f(e){for(var s=1;s<arguments.length;s++){var t=null!=arguments[s]?arguments[s]:{};s%2?h(Object(t),!0).forEach(function(s){(0,u.A)(e,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))})}return e}var b=(0,a.lh)({name:"getWeatherByCity",sid:"2vpy6y"}),w=(0,a.y$)(null,{name:"$cityInfo",sid:"z2zcqc"});(0,a.XM)({and:[{clock:b,filter:function(e){return!!p[e]},fn:function(e){var s=p[e],t=s.displayName;return f(f({},(0,m.A)(s,x)),{},{name:t})},target:w}],or:{sid:"-ckt3jo"}});var g=(0,l.K)(),j=(0,a.y$)(null,{name:"$forecastWeather",sid:"goeref"});(0,a.XM)({and:[{clock:w,filter:Boolean,fn:function(e){return e.coords},target:g}],or:{sid:"-bod8jd"}}),(0,a.XM)({and:[{clock:g.doneData,target:j}],or:{sid:"-bkiodu"}});var y=(0,a.kg)({and:[w,j,function(e,s){return e||s?f(f({},null!=e?e:{}),null!=s?s:{}):null}],or:{name:"$weatherByCity",sid:"d9u4pj"}}),v=g.pending,N=t(9664),_=t(4421),k=t(7876),E=function(){var e=(0,N.e3)({weather:c,gateOpened:i,pending:d}),s=e.gateOpened,t=e.weather;return e.pending,(0,r.useEffect)(s,[]),(0,k.jsx)("div",{className:"w-full flex justify-center pt-16 pb-8",children:(0,k.jsxs)("div",{className:"bg-white/80 rounded-2xl shadow-lg px-16 py-10 flex flex-col items-center gap-2",children:[t?(0,k.jsxs)("span",{className:"text-5xl font-extrabold text-purple-700 drop-shadow",children:["+",t.temperature,"\xb0C"]}):(0,k.jsx)(_.E,{}),(0,k.jsx)("span",{className:"text-lg text-gray-700 font-medium opacity-80",children:"Текущая температура"})]})})},O=t(3576),C=t(8230),D=t.n(C),P=t(4587),z=t.n(P),L=t(3e3),M=t.n(L),A=function(e){var s,t=e.id,a=(0,N.e3)([y,b,v]),l=(0,O.A)(a,3),n=l[0],i=l[1],o=l[2];return((0,r.useEffect)(function(){i(t)},[t]),o)?(0,k.jsxs)("div",{className:"relative w-full min-h-screen flex items-center justify-center",children:[(0,k.jsxs)(D(),{href:"/",className:"fixed top-8 left-8 px-6 py-3 rounded-xl bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 text-white text-base font-semibold shadow-lg hover:scale-105 active:scale-95 transition-all duration-200 border-none outline-none focus:outline-none z-50 flex items-center gap-2",children:[(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),"Назад"]}),(0,k.jsxs)("div",{className:"relative z-10 max-w-2xl w-full mx-4 rounded-3xl bg-white/20 backdrop-blur-lg shadow-2xl p-10 flex flex-col items-center",children:[(0,k.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,k.jsx)(_.E,{className:"w-16 h-16 rounded-full"}),(0,k.jsx)(_.E,{className:"w-32 h-16"})]}),(0,k.jsx)(_.E,{className:"w-48 h-8 mb-2"}),(0,k.jsx)(_.E,{className:"w-64 h-6 mb-8"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 w-full mt-2",children:[(0,k.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,k.jsx)(_.E,{className:"w-12 h-12 rounded-full mb-1"}),(0,k.jsx)(_.E,{className:"w-16 h-6 mb-1"}),(0,k.jsx)(_.E,{className:"w-12 h-4"})]}),(0,k.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,k.jsx)(_.E,{className:"w-12 h-12 rounded-full mb-1"}),(0,k.jsx)(_.E,{className:"w-16 h-6 mb-1"}),(0,k.jsx)(_.E,{className:"w-12 h-4"})]}),(0,k.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,k.jsx)(_.E,{className:"w-12 h-12 rounded-full mb-1"}),(0,k.jsx)(_.E,{className:"w-16 h-6 mb-1"}),(0,k.jsx)(_.E,{className:"w-12 h-4"})]})]})]})]}):n?(0,k.jsxs)("div",{className:"relative w-full min-h-screen flex items-center justify-center",children:[(0,k.jsxs)(D(),{href:"/",className:"fixed top-8 left-8 px-6 py-3 rounded-xl bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 text-white text-base font-semibold shadow-lg hover:scale-105 active:scale-95 transition-all duration-200 border-none outline-none focus:outline-none z-50 flex items-center gap-2",children:[(0,k.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",strokeWidth:"2.5",viewBox:"0 0 24 24","aria-hidden":"true",children:(0,k.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})}),"Назад"]}),(0,k.jsx)("div",{className:"absolute inset-0 z-0",children:(0,k.jsx)(z(),{src:n.image,alt:n.name,fill:!0,style:{objectFit:"cover",filter:"blur(4px) brightness(0.7)"},priority:!0,sizes:"100vw"})}),(0,k.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-black/60 via-transparent to-black/40 z-0"}),(0,k.jsxs)("div",{className:"relative z-10 max-w-2xl w-full mx-4 rounded-3xl bg-white/20 backdrop-blur-lg shadow-2xl p-10 flex flex-col items-center "+M()["fade-in"],children:[(0,k.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,k.jsx)("span",{className:"text-6xl drop-shadow-lg "+M()["pop-in"]+" "+M()["delay-100"],children:n.description?(s=n.description).toLowerCase().includes("ясно")?"☀️":s.toLowerCase().includes("дожд")?"\uD83C\uDF27️":s.toLowerCase().includes("обла")?"⛅":s.toLowerCase().includes("пасмурно")?"☁️":s.toLowerCase().includes("снег")?"❄️":"\uD83C\uDF21️":null}),(0,k.jsxs)("span",{className:"text-6xl font-extrabold text-white drop-shadow-lg "+M()["pop-in"]+" "+M()["delay-200"],children:[n.temperature,"\xb0C"]})]}),(0,k.jsx)("h1",{className:"text-3xl font-bold text-white mb-2 drop-shadow-lg text-center "+M()["fade-in"]+" "+M()["delay-300"],children:n.name}),(0,k.jsx)("div",{className:"text-xl text-white/90 mb-8 text-center "+M()["fade-in"]+" "+M()["delay-300"],children:n.description}),(0,k.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6 w-full mt-2",children:[(0,k.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,k.jsx)("span",{className:"text-3xl mb-1",children:"\uD83D\uDCA8"}),(0,k.jsxs)("span",{className:"text-lg text-gray-800 font-semibold",children:[n.wind," м/с"]}),(0,k.jsx)("span",{className:"text-xs text-gray-600",children:"Ветер"})]}),(0,k.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,k.jsx)("span",{className:"text-3xl mb-1",children:"\uD83D\uDCA7"}),(0,k.jsxs)("span",{className:"text-lg text-gray-800 font-semibold",children:[n.humidity,"%"]}),(0,k.jsx)("span",{className:"text-xs text-gray-600",children:"Влажность"})]}),(0,k.jsxs)("div",{className:"flex flex-col items-center bg-white/30 rounded-2xl p-4 shadow-md backdrop-blur-md",children:[(0,k.jsx)("span",{className:"text-3xl mb-1",children:"\uD83C\uDF21️"}),(0,k.jsxs)("span",{className:"text-lg text-gray-800 font-semibold",children:[n.pressure," мм"]}),(0,k.jsx)("span",{className:"text-xs text-gray-600",children:"Давление"})]})]})]})]}):null}}},e=>{var s=s=>e(e.s=s);e.O(0,[230,447,636,593,792],()=>s(2380)),_N_E=e.O()}]);